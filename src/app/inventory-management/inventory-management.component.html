<div style="padding: 10px">
  <p-button type="button" class="ui-button-raised" icon="pi pi-user-plus" iconPos="left" label="Add Inventory"
            (click)="onAddInventoryClicked()"></p-button>
</div>
<div>
  <p-table #dt [columns]="cols" [value]="inventoryList" [paginator]="true" [rows]="10"
           [rowsPerPageOptions]="[5,10,20,50,100]" [responsive]="true" sortField="laptopSn">
    <ng-template pTemplate="caption">
      <div class="p-grid">
        <div class="p-col-8">
          <div class="ui-helper-clearfix" style="text-align: left">
            <button type="button" pButton icon="pi pi-file-o" iconPos="left" label="CSV" (click)="dt.exportCSV()"
                    style="margin-right: 0.5em;"></button>
          </div>
        </div>
        <div class="p-col-4">
          <div style="text-align: right">
            <i class="pi pi-search" style="margin:6px 6px 0 0"></i>
            <input type="text" pInputText size="40" placeholder="Global Filter"
                   (input)="dt.filterGlobal($event.target.value, 'contains')" style="width:auto;height: 35px">
          </div>
        </div>
      </div>
    </ng-template>
    <ng-template pTemplate="header" let-columns>
      <tr>
        <th *ngFor="let col of columns" [pSortableColumn]="col.field">
          {{col.header}}
          <p-sortIcon [field]="col.field" ariaLabel="Activate to sort"
                      ariaLabelDesc="Activate to sort in descending order"
                      ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
        </th>
      </tr>
      <tr>
        <th *ngFor="let col of columns" [ngSwitch]="col.field">
          <input *ngSwitchCase="'laptopSn'" pInputText type="text"
                 (input)="dt.filter($event.target.value, col.field, 'contains')">
          <input *ngSwitchCase="'powerAdapterSn'" pInputText type="text"
                 (input)="dt.filter($event.target.value, col.field, 'contains')">
          <p-dropdown *ngSwitchCase="'status'" [options]="statusListFilter" [style]="{'width':'100%'}"
                      (onChange)="dt.filter($event.value, col.field, 'equals')"></p-dropdown>
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-columns="columns">
      <tr>
        <td class="cell-breakWord" *ngFor="let col of cols">
          {{rowData[col.field]}}
        </td>
        <td class="cell-max-width-4px p-col-2">
          <button pButton icon="pi pi-times" class="ui-button-danger" (click)="onDeleteInventoryClicked(rowData)"
                  style="margin-left: 0.5em;"></button>
          <button pButton icon="pi pi-user-edit" (click)="onEditInventoryClicked(rowData)"
                  style="margin-left: 0.5em;"></button>
          <button pButton label="Assign" (click)="onAssignInventoryClicked(rowData)"
                  style="margin-left: 0.5em;"></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<p-dialog header="{{inventoryModalTitle}}" [(visible)]="enableInventoryPopup" [style]="{width: '650px'}">
  <form [formGroup]="inventoryForm" (ngSubmit)="addOrEditInventory()">
    <div class="ui-fluid">
      <div class="p-field">
        <label for="laptopSn" class="p-col-12 p-md-2">Laptop SN <span style="color: red">*</span></label>
        <input id="laptopSn" type="text" formControlName="laptopSn" class="p-col-12 p-md-6">
        <span class="p-col-12 p-md-4" style="color: red"
              *ngIf="(registerFormControl.laptopSn.touched || submitted) && registerFormControl.laptopSn.errors?.required"> Value is required </span>
      </div>
      <div class="p-field">
        <label for="powerAdapterSn" class="p-col-12 p-md-2">Power Adapter SN<span style="color: red">*</span></label>
        <input id="powerAdapterSn" type="text" formControlName="powerAdapterSn" class="p-col-12 p-md-6">
        <span style="color: red"
              *ngIf="(registerFormControl.powerAdapterSn.touched || submitted) && registerFormControl.powerAdapterSn.errors?.required"> Value is required </span>
      </div>
      <div class="p-field" *ngIf="showStatusDropdown">
        <label class="p-col-12 p-md-2">Status<span style="color: red">*</span></label>
        <p-dropdown [options]="statusList" formControlName="status" placeholder="Select Status" optionLabel="label" [showClear]="true" class="p-col-12 p-md-6"></p-dropdown>
        <span style="color: red"
              *ngIf="(registerFormControl.status.touched || submitted) && registerFormControl.status.errors?.required"> Value is required </span>
      </div>
      <div class="p-field p-col-4">
        <button pButton type="submit" label="Submit" [disabled]="!inventoryForm.valid"></button>
      </div>

    </div>

  </form>

</p-dialog>

<p-dialog header="Delete Confirmation" [(visible)]="enableInventoryDeletePopup" [style]="{width: '300px'}">
  <span><p>Are you sure?</p></span>
  <button class="ui-button-danger" pButton type="submit" label="Delete" (click)="deleteInventory()"></button>
</p-dialog>
